<script>
var i_width = '[[name=广告宽度,type=textfield,allowblank=false,width=50]]';
var i_height = '[[name=广告高度,type=textfield,allowblank=false,width=50]]';
var a_width = '[[name=链接宽度,type=textfield,allowblank=false,width=50]]';
var a_height = '[[name=链接高度,type=textfield,allowblank=false,width=50]]';
var url = '[[name=H5页链接,type=textfield,allowblank=false,width=250]]';
var Click = '[URL]';
var Imp = '[[name=第三方监测,type=textfield,allowblank=true,width=250]]';
var AdName = '[[name=广告命名,width=250,type=textfield,allowblank=true]]';
var AssID = '[ASSID]';

if (Imp !== '') {
    var gaServerTracker = new Image();
    gaServerTracker.src = 'http://www.ftchinese.com/index.php/ft/hit/' + AssID + '/2?ec=' + AdName + ' (' + AssID + ')' + '&ea=initiate&el=' + encodeURIComponent(Imp) + '&' + Math.random();
    if (typeof window.parent.sendImpToThirdParty === 'function') {
        window.parent.sendImpToThirdParty(Imp, AdName, AssID);
    } else {
        sendImpToThirdParty(Imp, AdName, AssID);
    }
}

function sendImpToThirdParty(t,e,r){if("string"==typeof t){"object"!=typeof window.parent.gTrackThirdParyImpression&&(window.parent.gTrackThirdParyImpression={});var n=0,a=t,i=!1,o=function(){var t=arguments[0]||"",e=arguments[1]||"",n=arguments[2]||"",a="G"+Math.round(1e12*Math.random());try{window.parent.ga("send","event",t,e,n,{nonInteraction:1})}catch(o){var i=new Image;i.src="http://www.ftchinese.com/index.php/ft/hit/"+r+"/2?ec="+t+"&ea="+e+"&el="+encodeURIComponent(n)+"&r="+a}},c=function(){var d,s="IMG"+Math.round(1e12*Math.random()),p=(new Date).getTime(),h=t;try{d=arguments[0]||""}catch(t){d=""}h.indexOf("?")<0&&(h+="?"),h=h.replace("ord=[timestamp]","ord="+p)+"&"+s+"&ftctime="+p,n>0&&(0===a.indexOf("https")?(h=h.replace("https://ad.doubleclick.net","http://ad.doubleclick.net"),h=h.replace("https://v.admaster.com.cn","http://v.admaster.com.cn")):(h=h.replace("http://ad.doubleclick.net","https://ad.doubleclick.net"),h=h.replace("http://v.admaster.com.cn","https://v.admaster.com.cn"))),a=h,window.parent.gTrackThirdParyImpression[s]=new Image,window.parent.gTrackThirdParyImpression[s].src=h,window.parent.gTrackThirdParyImpression[s].title=e+" ("+r+")",window.parent.gTrackThirdParyImpression[s].alt=t,window.parent.gTrackThirdParyImpression[s].onload=function(){var t="";t=0===n?"Success":""!==d?"Success on Retry"+d:"Success on Retry"+n,o(this.title,t,this.alt),delete window.parent.gTrackThirdParyImpression[s],i=!0},window.parent.gTrackThirdParyImpression[s].onerror=function(){var t="";if(t=0===n?"Fail":""!==d?"Fail on Retry"+d:"Fail on Retry"+n,o(this.title,t,this.alt),o("Fail UA String",r,window.parent.adReachability()),"string"==typeof window.uaString)try{window.parent._hmt.push(["_trackEvent",this.title,"Fail",window.uaString])}catch(t){}++n<=3&&setTimeout(c,100*n*n*n)}};c(),setTimeout(function(){if(i===!1&&0===n){n=2;c(" from Pending"),o(e+" ("+r+")","Request from Pending",t)}},1e4),o(e+" ("+r+")","Request",t)}}

if (typeof Click === 'string') {
    document.write('<div style="width:' + i_width + 'px; height:' + i_height + 'px; display:block; overflow:hidden;">');
}
document.write('<ifr' + 'ame src="' + url + '" width="' + i_width + '" height="' + i_height + '" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="no" style="z-index:-10;"></ifr' + 'ame>');
if (typeof Click === 'string') {
    document.write('<a style="cursor:pointer; width:' + a_width + 'px; height:' + a_height + 'px;" href="[URL]" target="_blank"><div style="width:' + a_width + 'px; height:' + a_height + 'px; position:relative; top:-' + i_height + 'px; left:0px; z-index:10; background-color:black; filter:alpha(opacity=0); -moz-opacity:0; opacity:0; cursor:pointer; border:none; padding:0px; margin:0px;"></div></a></div>');
}
</script>